"use strict";(self["webpackChunkbetly_dapp"]=self["webpackChunkbetly_dapp"]||[]).push([[50],{25482:function(e,t,o){o.d(t,{Z:function(){return v}});var s=o(73396),l=o(44870),c=o(49242),n=o(23111),a=o(87139);const r={class:"now-color Wbg allFlex"},i={class:"now-color_left allFlex column center"},d={class:"blackWcolor font-One"},p={class:"mainColor font-Four font500"};var u={__name:"nowColor",props:{colorId:String},setup(e){return(t,o)=>((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",i,[(0,s._)("p",d,(0,a.zw)(t.$t("color")),1),(0,s._)("p",p,(0,a.zw)(+e.colorId>=0&&+e.colorId<16?(0,l.SU)(n._)[e.colorId]:(0,l.SU)(n._)[0]),1)]),(0,s._)("span",{class:"f1",style:(0,a.j5)({background:+e.colorId>=0&&+e.colorId<16?(0,l.SU)(n._)[e.colorId]:(0,l.SU)(n._)[0]})},null,4)]))}},h=o(40089);const w=(0,h.Z)(u,[["__scopeId","data-v-8cb5b156"]]);var m=w,f={__name:"selectColor",props:{colorSelect:Object,pixelSize:Number},setup(e){const t=e,{colorSelect:o,pixelSize:c}=(0,l.BK)(t),n=(0,s.Fl)((()=>o.value.x)),r=(0,s.Fl)((()=>o.value.y));return(e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"PixelHoverHighlight",style:(0,a.j5)({transform:`translate(${(0,l.SU)(n)}px, ${(0,l.SU)(r)}px`,width:(0,l.SU)(c)+"px",height:(0,l.SU)(c)+"px"})},null,4))}};const _=(0,h.Z)(f,[["__scopeId","data-v-6b9d08ff"]]);var y=_,k=o(28048);const A={class:"color-box"};var g={__name:"colorPixel",props:{type:String,size:Number},setup(e){const t=e,a=(o(99872),(0,k.Z)()),{type:r,size:i}=(0,l.BK)(t),d=(0,l.qj)({colorClick:{x:0,y:0}}),p=(0,s.Fl)((()=>a.activeColorId)),u=[],h=()=>{const e=8;for(let t=0;t<n._.length;t++){const o=t%e,s=Math.floor(t/e);u[s*e+o]=w(s*e+o,o*i.value,s*i.value,t)}},w=(e,t,o,s)=>({id:e,x:t,y:o,color:s}),f=e=>{d.colorClick=e.target.attrs,d.colorClick.colorId>=0&&a.selectColor(d.colorClick.colorId,r.value)};return(0,s.wF)((()=>{h()})),(e,t)=>{const o=(0,s.up)("v-rect"),a=(0,s.up)("v-layer"),r=(0,s.up)("v-stage");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",A,[(0,s.Wm)(r,{onTap:f,config:{width:8*(0,l.SU)(i),height:2*(0,l.SU)(i)}},{default:(0,s.w5)((()=>[(0,s.Wm)(a,null,{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(u,((e,t)=>(0,s.Wm)(o,{key:t,x:e.x,y:e.y,width:(0,l.SU)(i),height:(0,l.SU)(i),colorId:e.color,fill:(0,l.SU)(n._)[e.color]},null,8,["x","y","width","height","colorId","fill"]))),64))])),_:1})])),_:1},8,["config"]),(0,s.wy)((0,s.Wm)(y,{colorSelect:d.colorClick,pixelSize:(0,l.SU)(i)},null,8,["colorSelect","pixelSize"]),[[c.F8,d.colorClick]])]),(0,s.Wm)(m,{colorId:(0,l.SU)(p)},null,8,["colorId"])],64)}}};const S=(0,h.Z)(g,[["__scopeId","data-v-8523d87a"]]);var v=S},35694:function(e,t,o){o.d(t,{Z:function(){return k}});var s=o(73396),l=o(87139),c=o(44870),n=o(49242),a=o(23111),r=o(42325);const i={class:"flex_between info"},d={class:"flex_start"},p={class:"Wcolor marginTy"},u={class:"right"},h={class:"flex_start"},w={class:"Wcolor Bold font-Te marginTen"},m={class:"Wcolor marginTen"};var f={__name:"pixelInfo",props:{x:Number,y:Number,price:Number,colorId:Number,type:String},setup(e){return(t,o)=>((0,s.wg)(),(0,s.iD)("ul",i,[(0,s._)("li",d,[(0,s._)("span",{style:(0,l.j5)({background:(0,c.SU)(a._)[e.colorId]}),class:"color-btn"},null,4),(0,s._)("div",p,[(0,s._)("p",null,"X:"+(0,l.zw)(e.x),1),(0,s._)("p",null,"Y:"+(0,l.zw)(e.y),1)])]),(0,s._)("li",u,[(0,s.wy)((0,s._)("span",{class:"lightGrey font-Two"},(0,l.zw)(t.$t("price")),513),[[n.F8,"nft"==e.type]]),(0,s._)("div",h,[(0,s._)("span",w,(0,l.zw)("nft"==e.type?Number(e.price).toFixed(2):Number((0,c.SU)(r.IN)(e.price)).toFixed(2)),1),(0,s.wy)((0,s._)("span",m,"SKYT",512),[[n.F8,"nft"!==e.type]])])])]))}},_=o(40089);const y=(0,_.Z)(f,[["__scopeId","data-v-683dda9e"]]);var k=y},72373:function(e,t,o){o.d(t,{Z:function(){return _}});var s=o(73396),l=o(87139),c=o(49242),n=o(44870),a=(o(8666),o(31754)),r=o(57071),i=o(41258);const d={class:"bind allFlex column"},p={class:"popup-title Wcolor font-Eight font500 center"},u={key:0,class:"bind_ipt center Wcolor"},h={class:"bgPadding flex_between"};var w={__name:"swapAlert",props:{finish:Boolean,success:Boolean,hash:String,type:String,text:String,title:String,btn:String,empowerText:String,empower:Boolean,check:Boolean},emits:["closeFn","empowerFn","submit"],setup(e,{emit:t}){const o=e,{hash:w}=(0,n.BK)(o),{toClipboard:m}=((0,a.l)(),(0,r.Z)());return(t,o)=>{const a=(0,s.up)("van-button");return(0,s.wg)(),(0,s.iD)("div",d,[(0,s.wy)((0,s._)("span",{class:(0,l.C_)(["success-btn Wcolor font-Two",[e.success?"btnBg":"redBg"]])},(0,l.zw)(e.success?t.$t("success"):t.$t("fail")),3),[[c.F8,e.finish]]),(0,s.wy)((0,s.Wm)(i.Z,{class:"loading"},null,512),[[c.F8,!e.finish&&e.check]]),(0,s._)("p",p,(0,l.zw)(t.$t(e.title)),1),e.finish?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",u,[(0,s.WI)(t.$slots,"default")])),e.finish?((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,l.C_)(["bind_ipt bgPadding center",[e.success?"mainColor font-Ty":"redColor hashFont font-Four"]])},(0,l.zw)(e.success?t.$t(e.text):(0,n.SU)(w)),3)):(0,s.kq)("",!0),(0,s._)("div",h,[e.empower?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(a,{key:0,type:"primary",block:"",disabled:e.check,class:"font-Three",onClick:o[0]||(o[0]=e=>t.$emit("empowerFn"))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.$t(e.empowerText)),1)])),_:1},8,["disabled"])),(0,s.wy)((0,s.Wm)(a,{class:"btn font-Three",type:"primary",disabled:!e.empower||e.check,block:"",onClick:o[1]||(o[1]=e=>t.$emit("submit"))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.$t(e.btn)),1)])),_:1},8,["disabled"]),[[c.F8,!e.finish]]),(0,s.wy)((0,s.Wm)(a,{class:"btn font-Three",type:e.success?"primary":"danger",block:"",onClick:o[2]||(o[2]=e=>t.$emit("closeFn"))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.$t("SwapAlert.close")),1)])),_:1},8,["type"]),[[c.F8,e.finish]])])])}}},m=o(40089);const f=(0,m.Z)(w,[["__scopeId","data-v-58a1f06e"]]);var _=f},54050:function(e,t,o){o.r(t),o.d(t,{default:function(){return $}});o(59813);var s=o(97668),l=o(73396),c=o(87139),n=o(44870),a=o(22483),r=o(35694),i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAfCAMAAADdjm27AAAAe1BMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////NgkbwAAAAKHRSTlMAAhH3+/Qj8ey9hPnqJw4L7sG5tKGHG25mYFsfGOHFr6mTenQVz0QuZFz4dAAAAKZJREFUKM+Fz+kOgjAQBOACpaXcNyiHgqi8/xPaLYnuqoT5+WWy2WHtICebkQzrGpQLoXAF6y1Es6PNudbIksr9sXizS0dMGhPYfGMFNrtKjUXYfA8sP7ZwxwL1x7KI0XuwF5El7pq4QtIXsMxtkORG5uUttQKRN5sKx9Jt0nxLikRkDkh7LN4p/sgYUGFi5PofLKwACc8JGiuhQ4QpzqGD85zKB5UXnBEVim0ra3oAAAAASUVORK5CYII=",d=o(25482),p=o(28048);const u={class:"flex_between change-color_title"},h={class:"font-Six Wcolor"},w={class:"color-box"};var m={__name:"changeColor",emits:["setColor"],setup(e){const t=(0,p.Z)(),o=(0,n.qj)({show:!1,colorSize:30});return(e,s)=>{const a=(0,l.up)("van-button");return(0,l.wg)(),(0,l.iD)("div",{class:"change-color",style:(0,c.j5)({height:o.show?"300px":"30px"})},[(0,l._)("div",u,[(0,l._)("span",h,(0,c.zw)(e.$t("NFT.changeColor")),1),(0,l._)("img",{src:i,alt:"",class:(0,c.C_)(["right_icon",[o.show&&"check_icon"]]),onClick:s[0]||(s[0]=e=>o.show=!o.show)},null,2)]),(0,l._)("div",w,[(0,l.Wm)(d.Z,{type:"nft",size:(0,n.SU)(t).changeColorSize},null,8,["size"]),(0,l.Wm)(a,{type:"primary",plain:"",block:"",onClick:s[1]||(s[1]=t=>e.$emit("setColor"))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(e.$t("NFT.modity")),1)])),_:1})])],4)}}},f=o(40089);const _=(0,f.Z)(m,[["__scopeId","data-v-462e538f"]]);var y=_,k=o(72373),A=o(31754),g=o(42325),S=o(5658),v=o(32279);const b={class:"padding details"},x={class:"details_title flex_between"},F={class:"font-Seven Wcolor Bold"},C={class:"priceColor font-Two"},U={class:"font-Two Wcolor"},I={class:"details_img"},T=["src"],z={class:"titleBg details-info"},W={class:"font-Four"};var N={__name:"details",setup(e){const t=(0,A.l)(),o=(0,p.Z)(),i=(0,a.tv)(),d=(0,a.yj)(),{t:u}=(0,S.QT)(),h=(0,n.qj)({x:0,y:0,info:d.query,tokenid:d.query?.tokenid||d.query?.tokenId,alertShow:!1,finish:!1,success:!1,hash:"",type:"modity",times:"",check:!1,empower:!1,empowerText:"EmpowerAlert.btn2"});(0,n.iH)(0);const w=(0,l.Fl)((()=>o.activeColorId)),m=(0,n.iH)(!1),f=(0,l.Fl)((()=>t.priceArr[h.times])),_=async()=>{h.type="modity",h.alertShow=!0,h.finish=!1,h.success=!1,h.empower=!0};(0,l.wF)((()=>{Z(h.tokenid),h.x=(0,g.Vh)(h.tokenid).x,h.y=(0,g.Vh)(h.tokenid).y,o.selectColor(0)}));const N=async()=>{if(!(+h.times>=9)){h.type="sell",h.alertShow=!0,h.finish=!1,h.success=!1;try{const e=await t.allMethods.getApproved(h.tokenid).call();h.empower=e==t.market_address,h.type="sell",h.alertShow=!0,h.finish=!1,h.success=!1}catch(e){h.check=!1,(0,s.Z)(e)}}},Z=async e=>{h.times=await t.marketMethods.nftTradeCount(e).call()},$=async()=>{if(!h.check){h.check=!0;try{const e=await t.marketMethods.sell(h.tokenid).send({from:t.address});h.finish=!0,h.success=!0,h.hash=e.transactionHash,t.addHash(h.hash,1),h.check=!1}catch(e){h.finish=!0,h.success=!1,h.check=!1,h.hash=e.message}}},B=()=>{h.alertShow=!1,h.success&&"sell"==h.type&&setTimeout((()=>{i.go(-1)}),1e3)},D=async()=>{if(!h.check){h.check=!0,h.empowerText="EmpowerAlert.btn1";try{await t.allMethods.approve(t.market_address,h.tokenid).send({from:t.address});h.check=!1,h.empower=!0,h.empowerText="EmpowerAlert.btn2"}catch(e){h.check=!1,h.empowerText="EmpowerAlert.btn2",(0,s.Z)(e)}}},j=async()=>{if(!h.check){h.check=!0;try{const e=await t.allMethods.setPixelColor(h.info.canvasid,h.info.index,w.value+1).send({from:t.address});h.info.color=w.value,h.finish=!0,h.success=!0,h.check=!1,h.hash=e.transactionHash,t.addHash(h.hash,4)}catch(e){h.finish=!0,h.success=!1,h.check=!1,h.hash=e.message}}},E=()=>{"sell"==h.type?$():j()};return(0,l.m0)((()=>{h.info.endDate?m.value=1e3*+h.info.endDate+6048e5>(new Date).getTime():m.value=!1})),(e,o)=>{const s=(0,l.up)("title-text"),a=(0,l.up)("van-button"),i=(0,l.up)("van-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",b,[(0,l.Wm)(s),(0,l._)("div",x,[(0,l._)("span",F,(0,c.zw)(e.$t("name"))+"#"+(0,c.zw)(h.tokenid),1),(0,l._)("div",null,[(0,l._)("span",C,(0,c.zw)(e.$t("NFT.counts")),1),(0,l._)("span",U,(0,c.zw)(h.times>0?h.times-1:0),1)])]),(0,l._)("div",I,[(0,l._)("img",{src:(0,n.SU)(g.Gr)(h.tokenid),alt:""},null,8,T)]),(0,l._)("div",z,[(0,l.Wm)(r.Z,{price:(0,n.SU)(f),colorId:h.info.color,x:h.x,y:h.y,type:"nft"},null,8,["price","colorId","x","y"]),(0,l.Wm)(y,{onSetColor:_}),m.value&&h.times<9?((0,l.wg)(),(0,l.j4)(v.Z,{key:0,endDate:h.info.endDate,onClose:o[0]||(o[0]=e=>m.value=!1),class:"font-Seven countdown"},null,8,["endDate"])):((0,l.wg)(),(0,l.j4)(a,{key:1,type:"primary",block:"",disabled:+h.times>=9||"2"==h.info.type_,onClick:N},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(+h.times>=9||"2"==h.info.type_?e.$t("NFT.notSell"):e.$t("NFT.sell")),1)])),_:1},8,["disabled"]))])]),(0,l.Wm)(i,{show:h.alertShow,"onUpdate:show":o[1]||(o[1]=e=>h.alertShow=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(k.Z,{finish:h.finish,success:h.success,hash:h.hash,onCloseFn:B,title:"sell"==h.type?"SwapAlert.title6":"SwapAlert.title4",text:"sell"==h.type?"SwapAlert.success3":"SwapAlert.success4",btn:"sell"==h.type?"NFT.sell":"NFT.modity",empower:h.empower,empowerText:h.empowerText,onEmpowerFn:D,check:h.check,onSubmit:E},{default:(0,l.w5)((()=>[(0,l._)("p",W,(0,c.zw)("sell"==h.type?e.$t("NFT.type1",{start:(0,n.SU)(t).address.slice(0,6),end:(0,n.SU)(t).address.slice(-4),tokenId:h.tokenid}):e.$t("NFT.type3",{start:(0,n.SU)(t).address.slice(0,6),end:(0,n.SU)(t).address.slice(-4),tokenId:h.tokenid})),1)])),_:1},8,["finish","success","hash","title","text","btn","empower","empowerText","check"])])),_:1},8,["show"])],64)}}};const Z=(0,f.Z)(N,[["__scopeId","data-v-965ea1fe"]]);var $=Z},99872:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAQMAAAAlhr+SAAAABlBMVEU1QFAbICjSbLjzAAAAEElEQVQI12P4x4AFMf7BRAAjrg3ev0S+fgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=50.b96bf6aa.js.map
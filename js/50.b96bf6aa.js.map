{"version":3,"file":"js/50.b96bf6aa.js","mappings":"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","sources":["webpack://betly-dapp/./src/components/nowColor.vue","webpack://betly-dapp/./src/components/selectColor.vue","webpack://betly-dapp/./src/components/selectColor.vue?859f","webpack://betly-dapp/./src/components/colorPixel.vue","webpack://betly-dapp/./src/components/colorPixel.vue?3705","webpack://betly-dapp/./src/components/pixelInfo.vue","webpack://betly-dapp/./src/components/swapAlert.vue","webpack://betly-dapp/./src/components/swapAlert.vue?6f3c","webpack://betly-dapp/./src/views/NFT/components/changeColor.vue","webpack://betly-dapp/./src/views/NFT/components/changeColor.vue?3126","webpack://betly-dapp/./src/views/NFT/details.vue","webpack://betly-dapp/./src/views/NFT/details.vue?56f7"],"sourcesContent":["import script from \"./nowColor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./nowColor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./nowColor.vue?vue&type=style&index=0&id=8cb5b156&lang=scss&scoped=true\"\n\nimport exportComponent from \"/data/repos/1_20230106200100/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8cb5b156\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, toRefs, computed, watchEffect } from 'vue';\nconst props = defineProps({\n  colorSelect: Object,\n  pixelSize: Number,\n});\nconst { colorSelect, pixelSize } = toRefs(props);\nconst left = computed(() => colorSelect.value.x);\nconst top = computed(() => colorSelect.value.y);\n</script>\n<template>\n  <div\n    class=\"PixelHoverHighlight\"\n    :style=\"{\n      transform: `translate(${left}px, ${top}px`,\n      width: pixelSize + 'px',\n      height: pixelSize + 'px',\n    }\"\n  ></div>\n</template>\n\n<style lang=\"scss\" scoped>\n.PixelHoverHighlight {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.3);\n  z-index: 10;\n  box-shadow: inset 0 0 0 1px #fff;\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #fff;\n  font-weight: bold;\n  font-size: 6px;\n  top: 0;\n  left: 0;\n  border: 1px solid #fff;\n}\n.close-icon {\n  margin: auto auto;\n}\n</style>\n","import script from \"./selectColor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./selectColor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./selectColor.vue?vue&type=style&index=0&id=6b9d08ff&lang=scss&scoped=true\"\n\nimport exportComponent from \"/data/repos/1_20230106200100/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6b9d08ff\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, computed, onBeforeMount, toRefs } from 'vue';\nimport { hexPalette } from '@/utils/color.js';\nimport nowColor from './nowColor.vue';\nimport selectColor from './selectColor.vue';\nimport { canvasStore } from '@/store/canvas';\nconst canvasBg = require('@assets/commonImg/bg.png');\nconst store = canvasStore();\nconst props = defineProps({\n  type: String,\n  size: Number,\n});\nconst { type, size } = toRefs(props);\nconst data = reactive({\n  colorClick: {\n    x: 0,\n    y: 0,\n  },\n});\n\nconst activeColorId = computed(() => store.activeColorId);\nconst colorArr = [];\nconst createBox = () => {\n  // const len = Math.sqrt(hexPalette.length);\n  const len = 8;\n  for (let a = 0; a < hexPalette.length; a++) {\n    const x = a % len;\n    const y = Math.floor(a / len);\n    colorArr[y * len + x] = Box(y * len + x, x * size.value, y * size.value, a);\n  }\n};\nconst Box = (id, x, y, color) => {\n  return {\n    id,\n    x,\n    y,\n    color,\n  };\n};\nconst boxEvent = (event) => {\n  data.colorClick = event.target.attrs;\n  if (data.colorClick.colorId >= 0) {\n    store.selectColor(data.colorClick.colorId, type.value);\n  }\n};\nonBeforeMount(() => {\n  createBox();\n});\n</script>\n<template>\n  <div class=\"color-box\">\n    <v-stage\n      @tap=\"boxEvent\"\n      :config=\"{\n        width: size * 8,\n        height: size * 2,\n      }\"\n    >\n      <v-layer>\n        <v-rect\n          v-for=\"(item, key) in colorArr\"\n          :key=\"key\"\n          :x=\"item.x\"\n          :y=\"item.y\"\n          :width=\"size\"\n          :height=\"size\"\n          :colorId=\"item.color\"\n          :fill=\"hexPalette[item.color]\"\n        ></v-rect>\n      </v-layer>\n    </v-stage>\n    <select-color\n      v-show=\"data.colorClick\"\n      :colorSelect=\"data.colorClick\"\n      :pixelSize=\"size\"\n    ></select-color>\n  </div>\n  <now-color :colorId=\"activeColorId\"></now-color>\n</template>\n\n<style lang=\"scss\" scoped>\n.color-box {\n  display: inline-block;\n  position: relative;\n  margin: 0 auto;\n}\n</style>\n","import script from \"./colorPixel.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./colorPixel.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./colorPixel.vue?vue&type=style&index=0&id=8523d87a&lang=scss&scoped=true\"\n\nimport exportComponent from \"/data/repos/1_20230106200100/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8523d87a\"]])\n\nexport default __exports__","import script from \"./pixelInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./pixelInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./pixelInfo.vue?vue&type=style&index=0&id=683dda9e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/data/repos/1_20230106200100/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-683dda9e\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, toRefs } from \"vue\";\nimport popupTitle from \"@/components/popupTitle.vue\";\nimport { commonStore } from \"@/store/common\";\nimport useClipboard from \"vue-clipboard3\";\nimport { Toast } from \"vant\";\nimport loadingIcon from \"./loadingIcon.vue\";\n\nconst props = defineProps({\n  finish: Boolean,\n  success: Boolean,\n  hash: String,\n  type: String,\n  text: String,\n  title: String,\n  btn: String,\n  empowerText: String,\n  empower: Boolean,\n  check: Boolean,\n});\n\nconst { hash } = toRefs(props);\nconst emit = defineEmits([\"closeFn\", \"empowerFn\", \"submit\"]);\nconst common_store = commonStore();\nconst { toClipboard } = useClipboard();\n</script>\n<template>\n  <div class=\"bind allFlex column\">\n    <span\n      class=\"success-btn Wcolor font-Two\"\n      :class=\"[success ? 'btnBg' : 'redBg']\"\n      v-show=\"finish\"\n      >{{ success ? $t(\"success\") : $t(\"fail\") }}</span\n    >\n    <loading-icon class=\"loading\" v-show=\"!finish && check\"></loading-icon>\n    <p class=\"popup-title Wcolor font-Eight font500 center\">\n      {{ $t(title) }}\n    </p>\n    <div class=\"bind_ipt center Wcolor\" v-if=\"!finish\">\n      <slot></slot>\n    </div>\n\n    <div\n      class=\"bind_ipt bgPadding center\"\n      :class=\"[success ? 'mainColor font-Ty' : 'redColor hashFont font-Four']\"\n      v-if=\"finish\"\n    >\n      {{ success ? $t(text) : hash }}\n    </div>\n    <div class=\"bgPadding flex_between\">\n      <van-button\n        type=\"primary\"\n        block\n        v-if=\"!empower\"\n        :disabled=\"check\"\n        class=\"font-Three\"\n        @click=\"$emit('empowerFn')\"\n        >{{ $t(empowerText) }}</van-button\n      >\n      <van-button\n        class=\"btn font-Three\"\n        type=\"primary\"\n        :disabled=\"!empower || check\"\n        block\n        @click=\"$emit('submit')\"\n        v-show=\"!finish\"\n        >{{ $t(btn) }}</van-button\n      >\n      <van-button\n        class=\"btn font-Three\"\n        :type=\"success ? 'primary' : 'danger'\"\n        block\n        v-show=\"finish\"\n        @click=\"$emit('closeFn')\"\n        >{{ $t(\"SwapAlert.close\") }}</van-button\n      >\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.popup-title {\n  position: relative;\n  height: 50px;\n  line-height: 50px;\n}\n.bind {\n  width: 90vw;\n  height: 250px;\n  background: url(\"../assets/commonImg/alert-bg1.png\") no-repeat;\n  background-size: 100% 100%;\n  position: relative;\n  padding: 4px 4px 30px 4px;\n  &_ipt {\n    text-overflow: ellipsis;\n    word-break: break-all;\n    padding: 15px;\n    line-height: 30px;\n    max-height: 120px;\n    overflow-y: scroll;\n  }\n}\n.loading {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n}\n.success-btn {\n  padding: 2px 6px;\n  border-radius: 4px;\n  transform: scale(0.8);\n  position: absolute;\n  top: 15px;\n  right: 10px;\n}\n.btn {\n  margin-left: 10px;\n}\n</style>\n","import script from \"./swapAlert.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./swapAlert.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./swapAlert.vue?vue&type=style&index=0&id=58a1f06e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/data/repos/1_20230106200100/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-58a1f06e\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, onBeforeMount } from \"vue\";\nimport colorPixel from \"@/components/colorPixel.vue\";\nimport { canvasStore } from \"@/store/canvas\";\nconst canvas_store = canvasStore();\nconst data = reactive({\n  show: false,\n  colorSize: 30,\n});\ndefineEmits([\"setColor\"]);\n</script>\n<template>\n  <div class=\"change-color\" :style=\"{ height: data.show ? '300px' : '30px' }\">\n    <div class=\"flex_between change-color_title\">\n      <span class=\"font-Six Wcolor\">{{ $t(\"NFT.changeColor\") }}</span>\n      <img\n        src=\"@assets/nftImg/right_icon.png\"\n        alt=\"\"\n        class=\"right_icon\"\n        :class=\"[data.show && 'check_icon']\"\n        @click=\"data.show = !data.show\"\n      />\n    </div>\n    <div class=\"color-box\">\n      <color-pixel\n        type=\"nft\"\n        :size=\"canvas_store.changeColorSize\"\n      ></color-pixel>\n      <van-button type=\"primary\" plain block @click=\"$emit('setColor')\">{{\n        $t(\"NFT.modity\")\n      }}</van-button>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.change-color {\n  padding: 15px 20px;\n  border: 1px solid $white;\n  border-radius: 8px;\n  margin: 25px 0;\n  overflow: hidden;\n  transition: all ease-in 0.4s;\n  &_title {\n    height: 30px;\n  }\n}\n.right_icon {\n  width: 9px;\n  height: 15px;\n  transition: all ease-in 0.2s;\n}\n.check_icon {\n  transform: rotate(90deg);\n}\n.color-box {\n  margin-top: 20px;\n  .van-button {\n    margin-top: 20px;\n  }\n}\n</style>\n","import script from \"./changeColor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./changeColor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./changeColor.vue?vue&type=style&index=0&id=462e538f&lang=scss&scoped=true\"\n\nimport exportComponent from \"/data/repos/1_20230106200100/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-462e538f\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, onBeforeMount, computed, watchEffect } from 'vue';\nimport { useRoute } from 'vue-router';\nimport pixelInfo from '@/components/pixelInfo.vue';\nimport changeColor from './components/changeColor.vue';\nimport swapAlert from '@/components/swapAlert.vue';\nimport { commonStore } from '@/store/common';\nimport { canvasStore } from '@/store/canvas';\nimport { Toast } from 'vant';\nimport { useRouter } from 'vue-router';\nimport { getXY, getUrl } from '@/utils/index.js';\nimport { useI18n } from 'vue-i18n';\nimport countDown from '@/components/countDown.vue';\n\nconst common_store = commonStore();\nconst canvas_store = canvasStore();\nconst router = useRouter();\nconst route = useRoute();\nconst { t } = useI18n();\nconst data = reactive({\n  x: 0,\n  y: 0,\n  info: route.query,\n  tokenid: route.query?.tokenid || route.query?.tokenId,\n  alertShow: false,\n  finish: false,\n  success: false,\n  hash: '',\n  type: 'modity',\n  times: '',\n  check: false,\n  empower: false,\n  empowerText: 'EmpowerAlert.btn2',\n});\nlet colorId = ref(0);\nconst activeColorId = computed(() => canvas_store.activeColorId);\nconst getPixelColor = async () => {\n  const res = await common_store.allMethods.getPixel(data.tokenid).call();\n  colorId.value = res.color;\n};\nconst inTime = ref(false);\nconst price = computed(() => common_store.priceArr[data.times]);\nconst setColor = async () => {\n  // if (activeColorId.value == 0) {\n  //   Toast(t(\"Home.alert1\"));\n  //   return;\n  // }\n  data.type = 'modity';\n  data.alertShow = true;\n  data.finish = false;\n  data.success = false;\n  data.empower = true;\n};\nonBeforeMount(() => {\n  getTimes(data.tokenid);\n  data.x = getXY(data.tokenid).x;\n  data.y = getXY(data.tokenid).y;\n  canvas_store.selectColor(0);\n});\nconst toSell = async () => {\n  if (+data.times >= 9) {\n    return;\n  }\n  data.type = 'sell';\n  data.alertShow = true;\n  data.finish = false;\n  data.success = false;\n  try {\n    const res = await common_store.allMethods.getApproved(data.tokenid).call();\n    data.empower = res == common_store.market_address;\n    data.type = 'sell';\n    data.alertShow = true;\n    data.finish = false;\n    data.success = false;\n    // if (res == common_store.market_address) {\n    //   sell();\n    // } else {\n    //授权弹框\n    // const res = await common_store.allMethods\n    //   .approve(common_store.market_address, data.info.tokenid)\n    //   .send({ from: common_store.address });\n    //   common_store.setEmpowerType(2, data.info.tokenid);\n    //   common_store.showEmpower(true);\n    // }\n  } catch (error) {\n    data.check = false;\n    Toast(error);\n  }\n};\nconst getTimes = async (tokenId) => {\n  data.times = await common_store.marketMethods.nftTradeCount(tokenId).call();\n};\nconst sell = async () => {\n  if (data.check) {\n    return;\n  }\n  data.check = true;\n  try {\n    const sellRes = await common_store.marketMethods\n      .sell(data.tokenid)\n      .send({ from: common_store.address });\n    data.finish = true;\n    data.success = true;\n    data.hash = sellRes.transactionHash;\n    common_store.addHash(data.hash, 1);\n    data.check = false;\n  } catch (error) {\n    data.finish = true;\n    data.success = false;\n    data.check = false;\n    data.hash = error.message;\n  }\n};\nconst closeFn = () => {\n  data.alertShow = false;\n  if (data.success && data.type == 'sell') {\n    setTimeout(() => {\n      router.go(-1);\n    }, 1000);\n  }\n};\nconst empowerFn = async () => {\n  if (data.check) {\n    return;\n  }\n  data.check = true;\n  data.empowerText = 'EmpowerAlert.btn1';\n  try {\n    const res = await common_store.allMethods\n      .approve(common_store.market_address, data.tokenid)\n      .send({ from: common_store.address });\n    data.check = false;\n    data.empower = true;\n    data.empowerText = 'EmpowerAlert.btn2';\n  } catch (error) {\n    data.check = false;\n    data.empowerText = 'EmpowerAlert.btn2';\n    Toast(error);\n  }\n};\nconst setColorFn = async () => {\n  if (data.check) {\n    return;\n  }\n  data.check = true;\n  try {\n    const res = await common_store.allMethods\n      .setPixelColor(\n        data.info.canvasid,\n        data.info.index,\n        activeColorId.value + 1\n      )\n      .send({ from: common_store.address });\n    data.info.color = activeColorId.value;\n    data.finish = true;\n    data.success = true;\n    data.check = false;\n    data.hash = res.transactionHash;\n    common_store.addHash(data.hash, 4);\n    // Toast(t('NFT.moditySuccess'));\n  } catch (error) {\n    data.finish = true;\n    data.success = false;\n    data.check = false;\n    data.hash = error.message;\n  }\n};\nconst submit = () => {\n  data.type == 'sell' ? sell() : setColorFn();\n};\n\nwatchEffect(() => {\n  if (data.info.endDate) {\n    inTime.value =\n      +data.info.endDate * 1000 + 7 * 24 * 60 * 60000 > new Date().getTime();\n  } else {\n    inTime.value = false;\n  }\n});\n</script>\n<template>\n  <div class=\"padding details\">\n    <title-text></title-text>\n    <div class=\"details_title flex_between\">\n      <span class=\"font-Seven Wcolor Bold\"\n        >{{ $t('name') }}#{{ data.tokenid }}</span\n      >\n      <div>\n        <span class=\"priceColor font-Two\">{{ $t('NFT.counts') }} </span>\n        <span class=\"font-Two Wcolor\">\n          {{ data.times > 0 ? data.times - 1 : 0 }}</span\n        >\n      </div>\n    </div>\n\n    <div class=\"details_img\">\n      <img :src=\"getUrl(data.tokenid)\" alt=\"\" />\n    </div>\n    <div class=\"titleBg details-info\">\n      <pixel-info\n        :price=\"price\"\n        :colorId=\"data.info.color\"\n        :x=\"data.x\"\n        :y=\"data.y\"\n        type=\"nft\"\n      ></pixel-info>\n      <change-color @setColor=\"setColor\"></change-color>\n      <count-down\n        :endDate=\"data.info.endDate\"\n        @close=\"inTime = false\"\n        v-if=\"inTime && data.times < 9\"\n        class=\"font-Seven countdown\"\n      ></count-down>\n      <van-button\n        type=\"primary\"\n        block\n        v-else\n        :disabled=\"+data.times >= 9 || data.info.type_ == '2'\"\n        @click=\"toSell\"\n        >{{\n          +data.times >= 9 || data.info.type_ == '2'\n            ? $t('NFT.notSell')\n            : $t('NFT.sell')\n        }}</van-button\n      >\n    </div>\n  </div>\n  <van-popup v-model:show=\"data.alertShow\">\n    <swap-alert\n      :finish=\"data.finish\"\n      :success=\"data.success\"\n      :hash=\"data.hash\"\n      @closeFn=\"closeFn\"\n      :title=\"data.type == 'sell' ? 'SwapAlert.title6' : 'SwapAlert.title4'\"\n      :text=\"data.type == 'sell' ? 'SwapAlert.success3' : 'SwapAlert.success4'\"\n      :btn=\"data.type == 'sell' ? 'NFT.sell' : 'NFT.modity'\"\n      :empower=\"data.empower\"\n      :empowerText=\"data.empowerText\"\n      @empowerFn=\"empowerFn\"\n      :check=\"data.check\"\n      @submit=\"submit\"\n    >\n      <p class=\"font-Four\">\n        {{\n          data.type == 'sell'\n            ? $t('NFT.type1', {\n                start: common_store.address.slice(0, 6),\n                end: common_store.address.slice(-4),\n                tokenId: data.tokenid,\n              })\n            : $t('NFT.type3', {\n                start: common_store.address.slice(0, 6),\n                end: common_store.address.slice(-4),\n                tokenId: data.tokenid,\n              })\n        }}\n      </p>\n    </swap-alert>\n  </van-popup>\n</template>\n\n<style lang=\"scss\" scoped>\n.details {\n  padding-bottom: 40px;\n  &_title {\n    height: 40px;\n  }\n  &-info {\n    padding: 15px;\n    border-radius: 10px;\n    border: 1px solid $border2;\n  }\n  &_img {\n    img {\n      width: 100%;\n    }\n    margin: 10px 0 20px;\n  }\n  .van-button {\n    height: 45px;\n  }\n}\n.countdown {\n  height: 50px;\n}\n</style>\n","import script from \"./details.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./details.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./details.vue?vue&type=style&index=0&id=965ea1fe&lang=scss&scoped=true\"\n\nimport exportComponent from \"/data/repos/1_20230106200100/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-965ea1fe\"]])\n\nexport default __exports__"],"names":["__exports__","colorSelect","pixelSize","toRefs","props","left","computed","value","x","top","y","store","require","canvasStore","type","size","data","reactive","colorClick","activeColorId","colorArr","createBox","len","a","hexPalette","Math","floor","Box","id","color","boxEvent","event","target","attrs","colorId","selectColor","onBeforeMount","hash","toClipboard","commonStore","useClipboard","canvas_store","show","colorSize","common_store","router","useRouter","route","useRoute","t","useI18n","info","query","tokenid","tokenId","alertShow","finish","success","times","check","empower","empowerText","ref","inTime","price","priceArr","setColor","async","getTimes","getXY","toSell","res","allMethods","getApproved","call","market_address","error","marketMethods","nftTradeCount","sell","sellRes","send","from","address","transactionHash","addHash","message","closeFn","setTimeout","go","empowerFn","approve","setColorFn","setPixelColor","canvasid","index","submit","watchEffect","endDate","Date","getTime"],"sourceRoot":""}